/*
 * jQuery Image Art Direction - v1.0.0
 * Art direction for responsive images
 * https://github.com/kierate/jquery-imageartdirection/
 *
 * Made by Michal Kierat
 * Under MIT License
 */
!function(a,b,c,d){function e(){var a=this;clearTimeout(i),i=setTimeout(function(){a.each(function(){f(this)})},h.windowResizeThreshold)}function f(b){var c,e,f,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=a(b),A=b.naturalWidth,B=b.naturalHeight,C=z.width(),D=z.height(),E=g(z),F=(A-C)/A*100,G=F*E;if(c=z.attr("data-artdirection-focus-point"),c===d||c===!1)throw new Error("No data-artdirection-focus-point attribute defined");if(c=c.split(","),2!==c.length)throw new Error("Not enough coordinates provided in data-artdirection-focus-point attribute");if(e=parseInt(a.trim(c[0]),10),f=parseInt(a.trim(c[1]),10),isNaN(e))throw new Error("X coordinate incorrect in data-artdirection-focus-point attribute");if(isNaN(f))throw new Error("Y coordinate incorrect in data-artdirection-focus-point attribute");i=e,j=A-e,k=f,l=B-f,m=Math.round(i*G/100),n=Math.round(j*G/100),o=Math.round(k*G/100),p=Math.round(l*G/100),q=C+m+n,r=(A-q)/A*100,s=Math.round(e*(100-r)/100-parseInt(m,10)),t=Math.round(f*(100-r)/100-parseInt(o,10)),u=parseInt((C/2-s)*r/100,10),v=parseInt((D/2-t)*r/100,10),C/2-s!==0&&(m-=u,n+=u),D/2-t!==0&&(o-=v,p+=v),0>m&&(n+=m,m=0),0>n&&(m+=n,n=0),0>o&&(p+=o,o=0),0>p&&(o+=p,p=0),x=1===z.parent("div.img-artdirection-wrapper").length,w=x?z.parent("div.img-artdirection-wrapper"):a("<div></div>").addClass("img-artdirection-wrapper"),w.css("width","100%").css("height","auto").css("background-repeat","no-repeat").css("background-image","url("+z.attr("src")+")").css("background-position","-"+m+"px -"+o+"px").css("background-size",C+m+n+"px "+(D+o+p)+"px"),x||z.wrap(w).css("visibility","hidden"),a.isFunction(h.onCropResizeComplete)&&(y={currentImageWidth:C,currentImageHeight:D,fullImageWidth:A,fullImageHeight:B,cropFromLeft:m,cropFromRight:n,cropFromTop:o,cropFromBottom:p,focusPointX:e,focusPointY:f},h.onCropResizeComplete.call(z,y))}function g(b){var c=h.cropRatio;return b.attr("data-artdirection-crop-ratio")&&(c=a.trim(b.attr("data-artdirection-crop-ratio"))),c=c.replace("%","")/100,isNaN(c)?.5:c}var h,i;a.fn.artDirectionCropResize=function(c){return h=a.extend({},a.fn.artDirectionCropResize.defaults,c),a(b).on("resize.artdirectioncropresize",a.proxy(e,this)),this.each(function(){f(this)})},a.fn.artDirectionCropResize.defaults={cropRatio:"50%",windowResizeThreshold:100,onCropResizeComplete:null}}(jQuery,window,document);