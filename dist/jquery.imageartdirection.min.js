/*
 * jQuery Image Art Direction - v1.0.0
 * Art direction for responsive images
 * https://github.com/kierate/jquery-imageartdirection/
 *
 * Made by Michal Kierat
 * Under MIT License
 */
!function(a,b){function c(){var a=this;clearTimeout(f),f=setTimeout(function(){a.each(function(){d(this)})},e.windowResizeThreshold)}function d(b){var c=a(b),d=b.naturalWidth,f=b.naturalHeight,g=c.width(),h=c.height(),i=c.attr("data-artdirection-focus-point").split(","),j=parseInt(a.trim(i[0])),k=parseInt(a.trim(i[1])),l=e.cropRatio;c.attr("data-artdirection-crop-ratio")&&(l=a.trim(c.attr("data-artdirection-crop-ratio"))),l=l.replace("%","")/100;var m=100*((d-g)/d),n=m*l,o=j,p=d-j,q=k,r=f-k,s=o*n/100,t=p*n/100,u=q*n/100,v=r*n/100,w=g+s+t,x=100*((d-w)/d),y=g/2-(j*(100-x)/100-parseInt(s)),z=g/2-(j*(100-x)/100-parseInt(t));if(0>y){var A=y/2;s-=A,t+=A,0>s&&(t+=s,s=0),0>t&&(s+=t,t=0)}else if(0>z){var B=z/2;s+=B,t-=B,0>t&&(s+=t,t=0),0>s&&(t+=s,s=0)}g/2>o?(t+=s,s=0):g/2>p&&(s+=t,t=0);var C=s,D=u;s+g>d-s&&(C=s+t);var E,F=1==c.parent("div.img-artdirection-wrapper").length;if(E=F?c.parent("div.img-artdirection-wrapper"):a("<div></div>").addClass("img-artdirection-wrapper"),E.css("width","100%").css("height","auto").css("background-repeat","no-repeat").css("background-image","url("+c.attr("src")+")").css("background-position","-"+C+"px -"+D+"px").css("background-size",g+s+t+"px "+(h+u+v)+"px"),F||c.wrap(E).css("visibility","hidden"),a.isFunction(e.onCropResizeComplete)){var G={currentImageWidth:g,currentImageHeight:h,fullImageWidth:d,fullImageHeight:f,cropFromLeft:s,cropFromRight:t,cropFromTop:u,cropFromBottom:v,focusPointX:j,focusPointY:k,posLeft:C,posTop:D};e.onCropResizeComplete.call(c,G)}}var e,f;a.fn.artDirectionCropResize=function(f){return e=a.extend({},a.fn.artDirectionCropResize.defaults,f),a(b).on("resize.artdirectioncropresize",a.proxy(c,this)),this.each(function(){d(this)})},a.fn.artDirectionCropResize.defaults={cropRatio:"50%",windowResizeThreshold:100,onCropResizeComplete:null}}(jQuery,window,document);