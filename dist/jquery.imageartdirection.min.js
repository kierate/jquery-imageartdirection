/*
 * jQuery Image Art Direction - v1.0.0
 * Art direction for responsive images
 * https://github.com/kierate/jquery-imageartdirection/
 *
 * Made by Michal Kierat
 * Under MIT License
 */
!function(a,b){function c(){var a=this;clearTimeout(g),g=setTimeout(function(){a.each(function(){d(this)})},f.windowResizeThreshold)}function d(b){var c,d,g,h,i,j=a(b),k=b.naturalWidth,l=b.naturalHeight,m=j.width(),n=j.height(),o=j.attr("data-artdirection-focus-point").split(","),p=parseInt(a.trim(o[0]),10),q=parseInt(a.trim(o[1]),10),r=e(),s=100*((k-m)/k),t=s*r,u=p,v=k-p,w=q,x=l-q,y=u*t/100,z=v*t/100,A=w*t/100,B=x*t/100,C=m+y+z,D=100*((k-C)/k),E=m/2-(p*(100-D)/100-parseInt(y,10)),F=m/2-(p*(100-D)/100-parseInt(z,10)),G=E/2,H=F/2;console.log(r),console.log(cropRatioX),0>E?(y-=G,z+=G,0>y&&(z+=y,y=0),0>z&&(y+=z,z=0)):0>F&&(y+=H,z-=H,0>z&&(y+=z,z=0),0>y&&(z+=y,y=0)),m/2>u?(z+=y,y=0):m/2>v&&(y+=z,z=0),c=y,d=A,y+m>k-y&&(c=y+z),h=1===j.parent("div.img-artdirection-wrapper").length,g=h?j.parent("div.img-artdirection-wrapper"):a("<div></div>").addClass("img-artdirection-wrapper"),g.css("width","100%").css("height","auto").css("background-repeat","no-repeat").css("background-image","url("+j.attr("src")+")").css("background-position","-"+c+"px -"+d+"px").css("background-size",m+y+z+"px "+(n+A+B)+"px"),h||j.wrap(g).css("visibility","hidden"),a.isFunction(f.onCropResizeComplete)&&(i={currentImageWidth:m,currentImageHeight:n,fullImageWidth:k,fullImageHeight:l,cropFromLeft:y,cropFromRight:z,cropFromTop:A,cropFromBottom:B,focusPointX:p,focusPointY:q,posLeft:c,posTop:d},f.onCropResizeComplete.call(j,i))}function e(b){var c=f.cropRatio;return b.attr("data-artdirection-crop-ratio")&&(c=a.trim(b.attr("data-artdirection-crop-ratio"))),c=c.replace("%","")/100}var f,g;a.fn.artDirectionCropResize=function(e){return f=a.extend({},a.fn.artDirectionCropResize.defaults,e),a(b).on("resize.artdirectioncropresize",a.proxy(c,this)),this.each(function(){d(this)})},a.fn.artDirectionCropResize.defaults={cropRatio:"50%",windowResizeThreshold:100,onCropResizeComplete:null}}(jQuery,window,document);