/*
 * jQuery Image Art Direction - v1.0.0
 * Art direction for responsive images
 * https://github.com/kierate/jquery-imageartdirection/
 *
 * Made by Michal Kierat
 * Under MIT License
 */
!function(a,b){function c(){var a=this;clearTimeout(g),g=setTimeout(function(){a.each(function(){d(this)})},f.windowResizeThreshold)}function d(b){var c,d,g,h=a(b),i=b.naturalWidth,j=b.naturalHeight,k=h.width(),l=h.height(),m=h.attr("data-artdirection-focus-point").split(","),n=parseInt(a.trim(m[0]),10),o=parseInt(a.trim(m[1]),10),p=e(h),q=(i-k)/i*100,r=q*p,s=n,t=i-n,u=o,v=j-o,w=s*r/100,x=t*r/100,y=u*r/100,z=v*r/100,A=k+w+x,B=(i-A)/i*100,C=Math.round(n*(100-B)/100-parseInt(w,10)),D=Math.round(o*(100-B)/100-parseInt(y,10)),E=parseInt((k/2-C)*B/100,10),F=parseInt((l/2-D)*B/100,10);k/2-C!==0&&(w-=E,x+=E),l/2-D!==0&&(y-=F,z+=F),0>w&&(x+=w,w=0),0>x&&(w+=x,x=0),0>y&&(z+=y,y=0),0>z&&(y+=z,z=0),d=1===h.parent("div.img-artdirection-wrapper").length,c=d?h.parent("div.img-artdirection-wrapper"):a("<div></div>").addClass("img-artdirection-wrapper"),c.css("width","100%").css("height","auto").css("background-repeat","no-repeat").css("background-image","url("+h.attr("src")+")").css("background-position","-"+w+"px -"+y+"px").css("background-size",k+w+x+"px "+(l+y+z)+"px"),d||h.wrap(c).css("visibility","hidden"),a.isFunction(f.onCropResizeComplete)&&(g={currentImageWidth:k,currentImageHeight:l,fullImageWidth:i,fullImageHeight:j,cropFromLeft:w,cropFromRight:x,cropFromTop:y,cropFromBottom:z,focusPointX:n,focusPointY:o},f.onCropResizeComplete.call(h,g))}function e(b){var c=f.cropRatio;return b.attr("data-artdirection-crop-ratio")&&(c=a.trim(b.attr("data-artdirection-crop-ratio"))),c=c.replace("%","")/100,isNaN(c)?.5:c}var f,g;a.fn.artDirectionCropResize=function(e){return f=a.extend({},a.fn.artDirectionCropResize.defaults,e),a(b).on("resize.artdirectioncropresize",a.proxy(c,this)),this.each(function(){d(this)})},a.fn.artDirectionCropResize.defaults={cropRatio:"50%",windowResizeThreshold:100,onCropResizeComplete:null}}(jQuery,window,document);